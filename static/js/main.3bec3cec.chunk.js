(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},23:function(e){e.exports={characters:["barbarian.png","paladin.png","rogue.png","wizzard.png","archer.png","warrior.png","necromancer.png"]}},26:function(e,t,a){e.exports=a(48)},32:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),o=a(1),s=a(2),u=a(8),l=a(5),m=a(7),h=(a(32),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"app",className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",{id:"title-text"},"Heroes And Creatures Online")),r.a.createElement("div",{id:"board-div"}))}}]),t}(r.a.Component)),f=a(4),d=a.n(f),p=a(11),g=a(53),v=a(51),b=a(50),k=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"DefaultInitative",get:function(){return 0}},{key:"DefaultPower",get:function(){return 1}},{key:"MinimumHealth",get:function(){return 0}},{key:"MaximumInitiative",get:function(){return 2e3}},{key:"LimitInitiative",get:function(){return 1e3}}]),e}(),w=function e(t,a){Object(o.a)(this,e),this.maxHealth=t,this.health=t,this.agility=a,this.initiative=k.DefaultInitative},y=function e(t){var a=this;Object(o.a)(this,e),this.attack=function(){return a.power},this.power=t},T=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"TeamMaxLength",get:function(){return 4}},{key:"ImpossibleInitiative",get:function(){return-1}}]),e}(),E=function e(){var t=this;Object(o.a)(this,e),this.insertCharacter=function(e){if(function(e){if(!(e instanceof I))throw new TypeError("Not a character")}(e),t.isFull())throw new Error("Team is full");t.team.push(e)},this.isFull=function(){return t.team.length>=T.TeamMaxLength},this.getNextToAttack=function(){var e=T.ImpossibleInitiative,a=null;return t.team.forEach(function(t){t.getInitiative()>e&&!t.isDead()&&(e=t.getInitiative(),a=t)}),a},this.increaseAllInitiative=function(){t.team.forEach(function(e){e.increaseInitiative()})},this.getNbAlive=function(){var e=0;return t.team.forEach(function(t){t.isDead()||e++}),e},this.team=[]};function O(){[].forEach.call(arguments,function(e){if("number"!==typeof e)throw new TypeError("Not a number")})}var I=function(){function e(t,a){var n=this;Object(o.a)(this,e),this.getMaxHealth=function(){return n.stats.maxHealth},this.getHealth=function(){return n.stats.health},this.getAgility=function(){return n.stats.agility},this.getInitiative=function(){return n.stats.initiative},this.getPower=function(){return n.weapon?n.weapon.attack():k.DefaultPower},this.equipWeapon=function(e){!function(e){if(!(e instanceof y))throw new TypeError("Not a weapon")}(e),n.weapon=e},this.unequipWeapon=function(){n.weapon=null},this.attack=function(){return n.resetInitiative(),n.hasAWeapon()?n.weapon.attack():k.DefaultPower},this.resetInitiative=function(){n.stats.initiative=k.DefaultInitative},this.hasAWeapon=function(){return null!==n.weapon},this.block=function(e){O(e),n.stats.health-=e,n.stats.health<k.MinimumHealth&&(n.stats.health=k.MinimumHealth)},this.isDead=function(){return n.stats.health<=k.MinimumHealth},this.toString=function(){if(!n.isDead()){var e=n.getInitiative();e>k.LimitInitiative&&(e=k.LimitInitiative);var t="Health: "+n.stats.health;return t+=" Weapon: "+n.getPower(),t+=" Init: "+e}return"DEAD"},O(t,a),this.stats=new w(t,a),this.weapon=null}return Object(s.a)(e,[{key:"increaseInitiative",value:function(){this.stats.initiative+=this.stats.agility,this.stats.initiative>k.MaximumInitiative&&(this.stats.initiative=k.MaximumInitiative)}}]),e}(),j=10,x=100,C=40,A=4;function P(){var e=new I(D(j,x),D(j,x));return e.equipWeapon(new y(D(j,C))),e}function N(){for(var e=new E,t=0;t<A;++t)e.insertCharacter(P());return e}function D(e,t){return Math.floor(Math.random()*(t-e)+e)}var L=a(23),z="/HeroesAndCreaturesOnline/images/",M=L.characters,S=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getRandomCharacterImg",value:function(){var e=D(0,M.length);return z+M[e]}},{key:"getRipImg",value:function(){return z+"rip.png"}},{key:"getDmgImg",value:function(){return z+"dmg.png"}}]),e}());Object.freeze(S);var R=S,H=function(e){return new Promise(function(t){return setTimeout(t,e)})},B=(a(20),function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"fadeOutAnimation",value:function(){var e=Object(p.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return t.classList.contains("fade")||t.classList.add("fade"),e.next=4,H(1e3);case 4:a=R.getRipImg(),t.setAttribute("src",a),t.classList.remove("fade");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"dmgAnimation",value:function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return a=t.getAttribute("src"),n=R.getDmgImg(),t.setAttribute("src",n),e.next=6,H(200);case 6:t.setAttribute("src",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"zoomImage",value:function(e){e&&(e.classList.contains("zoom-effect")||e.classList.add("zoom-effect"))}},{key:"unzoomImage",value:function(e){e&&e.classList.contains("zoom-effect")&&e.classList.remove("zoom-effect")}}]),e}()),W=0,G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).blockDamages=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.character.isDead()){e.next=9;break}return e.next=3,a.animations.dmgAnimation(a.getImage());case 3:if(a.character.block(a.block),!a.character.isDead()){e.next=7;break}return e.next=7,a.animations.fadeOutAnimation(a.getImage());case 7:a.refreshStats(),window.gameScript.playTurn();case 9:case"end":return e.stop()}},e)})),a.zoomSprite=function(){a.animations.zoomImage(a.getImage())},a.unzoomSprite=function(){a.animations.unzoomImage(a.getImage())},a.getImage=function(){var e=a.state.id+"-img";return document.getElementById(e)},a.increaseInitiative=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.character.increaseInitiative(),a.refreshStats();case 2:case"end":return e.stop()}},e)})),a.refreshStats=function(){a.setState({characterDisplay:a.character.toString()})},a.enableOnClick=function(e){a.block=e,document.getElementById(a.state.id).addEventListener("click",a.blockDamages,!1)},a.disableOnClick=function(){a.block=W,document.getElementById(a.state.id).removeEventListener("click",a.blockDamages,!1)},a.animations=new B,a.character=e.character,a.block=W,a.spriteUrl=R.getRandomCharacterImg(),a.state={characterDisplay:a.character.toString(),id:e.id,image:r.a.createElement("img",{className:"character-img",id:e.id+"-img",src:a.spriteUrl,alt:"alive-character"})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{id:this.state.id,"data-testid":"character-display"},this.state.image,r.a.createElement("br",null),r.a.createElement("p",{id:this.state.id+"-stats",className:"character-text","data-testid":"char-stats"},this.state.characterDisplay))}}]),t}(r.a.Component),U=4,q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).refreshAllCharacters=function(){a.characters.forEach(function(e){e.refreshStats()})},a.characterId=function(e){var t="char-";return t+=e+a.isPlayer*U},a.enableClick=function(e){a.characters.forEach(function(t){t.enableOnClick(e)})},a.disableClick=function(){a.characters.forEach(function(e){e.disableOnClick()}),a.unzoomTeam()},a.unzoomTeam=function(){a.characters.forEach(function(e){e.unzoomSprite()})},a.readyToAttack=function(){for(var e=-1,t=-1,n=0;n<a.team.team.length;++n){var r=a.team.team[n];!r.isDead()&&r.getInitiative()>e&&(e=r.getInitiative(),t=n)}-1!==t&&a.characters[t].zoomSprite()},a.team=e.team,a.characters=[],a.isPlayer=e.isPlayer,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{"data-testid":"team-display"},r.a.createElement(G,{id:this.characterId(0),ref:function(t){return e.characters.push(t)},character:this.team.team[0]}),r.a.createElement(G,{id:this.characterId(1),ref:function(t){return e.characters.push(t)},character:this.team.team[1]}),r.a.createElement(G,{id:this.characterId(2),ref:function(t){return e.characters.push(t)},character:this.team.team[2]}),r.a.createElement(G,{id:this.characterId(3),ref:function(t){return e.characters.push(t)},character:this.team.team[3]}))}}]),t}(r.a.Component),F=a(55),J=a(54),V=function(e){function t(e,a){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e,a))).state={open:!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"appendText",value:function(e){var t=document.getElementById("collapse-text"),a=document.createElement("p");a.innerHTML=e,a.appendChild(document.createElement("br")),t.appendChild(a)}},{key:"render",value:function(){var e=this,t=this.state.open;return r.a.createElement("div",null,r.a.createElement(F.a,{onClick:function(){return e.setState({open:!t})},"aria-controls":"collapse-text","aria-axpend":t}," ","Click to expand the battle log"),r.a.createElement(J.a,{in:this.state.open},r.a.createElement("div",{id:"collapse-text"},r.a.createElement("p",null,"Battle has begun!")," ",r.a.createElement("br",null))))}}]),t}(r.a.Component),$=a(52),K=(a(44),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).reloadGame=function(){window.location.reload()},a.state={winner:e.winner},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement($.a,{className:"victory-style"},r.a.createElement("p",{className:"victory-header"},"Game over"),r.a.createElement("br",null),r.a.createElement("p",{className:"winner-text"},this.state.winner," won"),r.a.createElement("hr",null),r.a.createElement(F.a,{variant:"secondary",onClick:this.reloadGame},"Replay ?"))}}]),t}(r.a.Component)),Q=(a(45),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).updateText=function(e){a.setState({text:e})},a.state={text:"Please click on a character"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"prompt-style"},r.a.createElement("p",null,this.state.text))}}]),t}(r.a.Component)),X=(a(46),1e3),Y=3e3,Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).checkVictory=function(){var e=a.cpuTeam.getNbAlive(),t=a.userTeam.getNbAlive();if(0===e||0===t){var n=document.getElementById("board");n.innerHTML="",a.playerWon()?c.a.render(r.a.createElement(K,{winner:"user"}),n):c.a.render(r.a.createElement(K,{winner:"cpu"}),n)}},a.isGameOver=function(){var e=a.cpuTeam.getNbAlive(),t=a.userTeam.getNbAlive();return 0===e||0===t},a.playerWon=function(){return 0===a.cpuTeam.getNbAlive()},a.increaseAllInitiative=function(){for(;!a.atLeastOneCanPlay();)a.cpuTeam.increaseAllInitiative(),a.userTeam.increaseAllInitiative();a.currentCharacter=a.getNextToATtack(),a.refreshTeams()},a.computerAttack=function(e,t){a.userTeam.team[e].block(t),a.refreshTeams()},a.refreshTeams=function(){a.cpuTeamRender.refreshAllCharacters(),a.userTeamRender.refreshAllCharacters()},a.atLeastOneCanPlay=function(){var e=a.cpuTeam.getNextToAttack().getInitiative(),t=a.userTeam.getNextToAttack().getInitiative();return e>=X||t>=X},a.getNextToATtack=function(){var e=a.cpuTeam.getNextToAttack().getInitiative();return a.userTeam.getNextToAttack().getInitiative()>e?(a.userTeamRender.readyToAttack(),a.userTeam.getNextToAttack()):(a.cpuTeamRender.readyToAttack(),a.cpuTeam.getNextToAttack())},a.isPlayerTurn=function(){return a.cpuTeam.getNextToAttack().getInitiative()<a.userTeam.getNextToAttack().getInitiative()},a.changePrompt=function(e){a.prompt.updateText(e)},a.allowUserPlay=function(){var e=a.currentCharacter.getPower();a.currentCharacter.resetInitiative(),a.changePrompt("User turn: Power -> "+e),a.cpuTeamRender.enableClick(e)},a.allowCpuPlay=function(){var e=a.currentCharacter.getPower();a.currentCharacter.resetInitiative(),a.changePrompt("Cpu turn: Power -> "+e),a.userTeamRender.enableClick(e),a.cpuMakeChoice()},a.getAliveTarget=function(){for(var e=[],t=0;t<a.userTeam.team.length;++t)a.userTeam.team[t].isDead()||e.push(t);return e},a.cpuMakeChoice=Object(p.a)(d.a.mark(function e(){var t,n,r,i,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getAliveTarget(),n=D(0,t.length),r=t[n],i=document.getElementById("char-"+(r+4)),c="Cpu attacked: "+r+" with a power of "+a.currentCharacter.getPower(),window.logs.appendText(c),a.changePrompt(c),e.next=9,H(Y);case 9:i.click();case 10:case"end":return e.stop()}},e)})),a.blockPlayers=function(){a.userTeamRender.disableClick(),a.cpuTeamRender.disableClick()},a.cpuTeam=N(),a.userTeam=N(),a.currentCharacter=null,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"board",onClick:this.checkVictory},r.a.createElement(g.a,{fluid:!0},r.a.createElement(v.a,null,r.a.createElement(b.a,{xs:2,fluid:!0},r.a.createElement(V,{ref:function(e){return window.logs=e}})),r.a.createElement(b.a,{xs:10},r.a.createElement(g.a,{className:"board-style"},r.a.createElement(q,{ref:function(t){return e.cpuTeamRender=t},team:this.cpuTeam,isPlayer:!1}),r.a.createElement("br",null),r.a.createElement(q,{ref:function(t){return e.userTeamRender=t},team:this.userTeam,isPlayer:!0})))),r.a.createElement(v.a,{className:"justify-content-center"},r.a.createElement(Q,{ref:function(t){return e.prompt=t}}))))}}]),t}(r.a.Component),_=function e(){var t=this;Object(o.a)(this,e),this.startGame=function(){window.gameScript=t,t.renderElements(),t.playTurn()},this.playTurn=Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.board.isGameOver();case 2:if(e.sent){e.next=6;break}t.board.blockPlayers(),t.board.increaseAllInitiative(),t.board.isPlayerTurn()?t.userTurn():t.computerTurn();case 6:case"end":return e.stop()}},e)})),this.userTurn=function(){t.board.allowUserPlay()},this.computerTurn=function(){t.board.changePrompt("Computer turn"),t.board.allowCpuPlay()},this.renderElements=function(){c.a.render(r.a.createElement(Z,{ref:function(e){window.gameBoard=e}}),document.getElementById("board-div")),t.board=window.gameBoard}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(47);c.a.render(r.a.createElement(h,null),document.getElementById("root")),(new _).startGame(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.3bec3cec.chunk.js.map